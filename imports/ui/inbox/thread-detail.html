<template name="ThreadDetail">
  <div class="thread-detail">
    <div class="box box-widget" id="thread-detail-accordion">
      <div class="box-header with-border">
        <p class="box-title">About</p>
      </div>
      <div class="panel flat-panel">
        <div class="flat-panel-heading">
          <h4 class="flat-panel-title">{{subject}}</h4>
        </div>
        <div id="thread-info">
          <div class="flat-panel-body">
            <p class="small text-muted">Created by {{user.name}} at {{formattedDate createdAt "simple"}}</p>
          </div>
        </div>
      </div>
      <div class="panel flat-panel">
        <div class="flat-panel-heading">
          <a data-parent="#thread-detail-accordion" href="#members" data-toggle="collapse">
            <h4 class="flat-panel-title"><i class="fa fa-users text-success"></i>Members ({{members.count}})</h4>
          </a>
        </div>
        <div id="members" class="panel-collapse collapse in">
          <div class="flat-panel-body">
            <ul class="list-group members-list" style="max-height: calc(100vh - 330px); overflow-y: auto;">
              {{#each members}}
                {{> UserListItem user}}
              {{/each}}
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="UserListItem">
  <li class="list-group-item members-item clearfix">
    <span class="pull-left">
      {{> avatar user=this shape="circle" class="img-circle pull-left" size="small"}}
    </span>

    <div class="members-info">
      <a href="#" class="member-name text-ellipsis" data-toggle="popover-roster" data-placement="bottom">
      {{name}}
      </a>
      <span class="pull-right">{{title}}</span>
      <span class="member-organization text-muted text-ellipsis">{{email}}</span>
    </div>
  </li>
</template>
