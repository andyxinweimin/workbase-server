<template name="Roster">
  {{> contentFor region="menu" template="RosterMenu" data=user}}

  {{#contentFor "title"}}
    <p class="navbar-text" style="color: white; font-weight: 600;">{{_ 'Users'}}</p>
  {{/contentFor}}

  {{#Layout template="InboxLayout" hasRight=hasRight hasSidebar=hasSidebar}}
    {{> RosterList users=users user=user}}

    {{> contentFor region="header" template="RosterHeader" data=user}}
    {{> contentFor region="right" template="RosterCard" data=user}}
  {{/Layout}}
</template>

<template name="RosterMenuItem">
  <li class="{{#if inRouter 'roster'}}active{{/if}}">
    <a href="/roster"><i class="fa fa-address-book"></i> {{_ 'Users'}}</a>
  </li>
</template>

<template name="RosterMenu">
  {{#if currentUser.isAdmin}}
    <ul class="dropdown-menu" role="menu">
      {{#if _id}}
        <li><a href="#" id="btn-edit-roster"><i class="fa fa-edit"></i> {{_ "Edit User"}}</a></li>
        <li class="divider"></li>
      {{/if}}
      <li><a href="#" id="btn-add-roster"><i class="fa fa-plus"></i> {{_ "New User"}}</a></li>
    </ul>
  {{/if}}
</template>

<template name="RosterList">
  <ul class="list-group threads">
    {{#each users}}
      <a href="/roster/{{_id}}" class="list-group-item clearfix thread" id="{{_id}}">
        <div class="thread-icon">
          {{> avatar user=this shape="circle" class="img-circle" size="small"}}
        </div>
        <div class="thread-title">
          <div class="thread-subject-wrap clearfix">
            <span class="thread-subject">{{name}}</span>
            <small class="pull-right text-muted">&nbsp;{{title}}</small>
          </div>
          <div class="thread-message-wrap">
            <div class="thread-message text-muted">
              <div class="message-summary">
                <span class="text-ellipsis">
                  {{email}}
                </span>
              </div>
            </div>
          </div>
        </div>
      </a>
    {{/each}}
  </ul>
</template>

<template name="RosterHeader">
  {{> InboxBackButton}}
  <div class="thread-subject">{{name}}</div>
</template>

<template name="RosterCard">
  <div class="roster-card">
    <div class="box box-widget widget-user-2">
      <!-- Add the bg color to the header using any of the bg-* classes -->
      <div class="widget-user-header bg-yellow clearfix">
        {{> avatar user=this shape="circle" class="img-circle pull-left" size="large"}}
          <!-- /.widget-user-image -->
        <h3 class="widget-user-username">{{name}}</h3>
        <h5 class="widget-user-desc">{{email}}</h5>
      </div>
      <div class="box-footer no-padding">
        <ul class="nav nav-stacked">
          <li><a href="#">Posts <span class="pull-right badge bg-blue">8</span></a></li>
        </ul>
      </div>
    </div>

    <a href="#" class="btn btn-primary btn-block" id="btn-chat">{{_ "Send Messages"}}</a>
  </div>
</template>
